# -*- coding: utf-8 -*-
# 在不改变剧情走向的前提下，补充属性与条件判断

# ===== 变量 =====
# 运动层面
default reputation = 0           # 社会支持度（-3 ~ +3）
default risk = 0                 # 风险值（0 ~ 5）
default route_taken = ""         # direct / detour
default action_at_zjl = ""       # attack / parade
default city_support = 0         # 各地响应度（由过程动态累计）
default media_attention = 0      # 媒体关注度


default passion = 0              # 爱国热情
default insight = 0              # 思想觉悟
default fame = 0                 # 社会声望（个人影响力）
# 旗标
default jailed = False           # 是否被捕
default wrote_radical = False    # 是否写过檄文
default wrote_commentary = False # 是否写过评论
default strategy_work = ""    # 记录“街头演讲 / 办报写文章”


# ===== 角色 =====
define s = Character ("你", color="#66ccff")
define c = Character ("同学", color="#f5a623")
define l = Character ("领队", color="#7ed321")
define g = Character ("工人代表", color="#f45b69")
define m = Character ("商会代表", color="#b28bd0")
define j = Character ("记者", color="#c1a45b")
define t = Character ("茶馆老板", color="#8b4513")
define d = Character ("密探", color="#444444")
define p = Character ("被捕学生", color="#ff6b6b")
define passersby = Character ("路人", color="#6b77ff")
define crowd = Character ("群众", color="#6b77ff")
define 军警 = Character ("军警", color="#f1973c")
define n = Character("旁白")

label start:
    scene black
    with fade

    c "（气喘吁吁跑过来）你听说了吗？巴黎和会把青岛给日本了！校长刚在礼堂骂了半个钟头，说这是亡国条约！"
    s "什么？去年就说要还山东，怎么现在变卦了？"
    l "（举着传单走过来）别愣着了！明天一早全校上街游行，要让北洋政府知道，学生不答应，国人更不答应！你参不参加？"

    $ reputation = 0
    $ risk = 0
    $ route_taken = ""
    $ action_at_zjl = ""
    $ city_support = 0
    $ media_attention = 0
    $ passion = 0
    $ insight = 0
    $ fame = 0
    $ jailed = False
    $ wrote_radical = False
    $ wrote_commentary = False

    n "学生号召明日上街游行，你是否参加？"
    menu:
        "积极参加":
            s "参加！国要亡了，读书还有什么用？明天我跟你们一起去！"
            l "（拍肩）好样的！明天五点操场集合，咱们一起喊口号！"
            # 个人成长与舆论面增益
            $ passion += 2
            $ fame += 1
            $ reputation += 1
            jump join

        "谨慎观望":
            s "游行能有用吗？万一被抓了，反而帮不上忙。我想先看看局势，再找更稳妥的办法。"
            c "（皱眉）都这时候了还稳妥？你是不是怕了？"
            s "不是怕，是不想做无谓牺牲。等你们回来，咱们再商量后续对策。"
            # 冷静评估，觉悟上升但声望略降
            $ insight += 2
            $ reputation -= 1
            $ media_attention += 0
            jump hesitate

        "拒绝参加":
            s "我爹娘让我来北京是读书的，不是闹事的。政治的事太复杂，我不想卷进去。"
            l "（脸色沉下来）国难当头，还只想着自己？你就算不参加，也别拦着其他人！"
            # 自我抽离，声望与社会支持下降
            $ fame -= 1
            $ reputation -= 2
            jump refuse

label join:
    s "（对着宿舍镜子整理校服）不能再沉默了，今天一定要让全国知道我们的立场！"
    c "（敲门）快走吧！操场都聚了两百多人了，领队说缺个懂路线的，让你过去给个主意。"
    s "来了！我昨晚查了北京地图，咱们可以从西长安街走，那边人多，能让更多人看见。"
    j "（举着相机走过来）同学，能问下你们明天的游行计划吗？我是《晨报》记者，想报道你们的诉求。"
    s "当然可以！我们要去总统府请愿，要求拒签和约、惩治国贼！"
    $ media_attention += 1
    jump plan_route

label plan_route:
    l "（铺开地图）现在商量下路线 —— 是直接从东单穿过去，直达赵家楼？还是绕着前门走，沿途跟商户、工人说说咱们的事？"
    c "直达吧！早到早请愿，免得夜长梦多！"
    g "（突然走进来）我是附近工厂的工人代表，刚听说你们要游行。要是绕前门，我们厂能出五十个工人跟你们一起走！"
    menu:
        "直达赵家楼（更快但风险高）":
            s "就走东单！咱们人多，只要速度快，军警来不及拦。而且早到赵家楼，能赶在政府下班前递请愿书！"
            $ route_taken = "direct"
            $ risk += 2
            $ media_attention += 1
            # 冲劲会被同伴认可，热情小幅上涨
            $ passion += 1
            l "（点头）行！那就按你说的来，大家现在分好组，每组举一面旗，别走散了！"
            g "（叹气）可惜了，本来还想让工人兄弟帮你们挡挡军警。你们自己多小心。"
            jump zhaojialou_choice

        "迂回前进（较安全，可沿途发动群众）":
            s "谢谢工人大哥！咱们走前门吧 —— 光靠学生不够，得让商户、工人都站出来，政府才会重视。"
            $ route_taken = "detour"
            $ risk += 0
            $ reputation += 1
            $ media_attention += 1
            $ insight += 1
            # 沿途演讲可累积个人声望
            $ fame += 1
            m "（推门进来）我是前门商会的，刚听说你们要绕路过来。我们已经跟沿街商铺打过招呼了，到时候会给你们送水、喊口号！"
            l "（笑）太好了！这样咱们的队伍能越来越大！"
            jump detour_route

label detour_route:
    #scene 前门大街，沿街商铺挂着 "支持学生" 的布条
    t "（站在茶馆门口招手）同学们快过来歇会儿！我煮了绿豆汤，大家喝了再走！"
    s "（接过碗）谢谢老板！您知道我们为什么游行吗？日本要抢咱们的青岛，政府还想签和约！"
    t "（拍桌子）我知道！昨天看报纸就气炸了！等下我关了茶馆，跟你们一起去！"
    passersby "（围过来）我们也去！不能让外国人欺负咱们！"
    $ reputation += 1
    $ media_attention += 1
    $ fame += 1
    c "（数人数）哇，现在都有五百多人了！比在学校时多了一倍！"
    g "（带着工人跑过来）我们厂的人都来了！前面就是赵家楼，咱们一起过去！"
    s "好！大家排好队，别挤，咱们一起喊口号 —— 还我青岛，拒签和约！"
    crowd "还我青岛，拒签和约！"
    jump zhaojialou_choice

label zhaojialou_choice:
    l "（指着楼上）曹汝霖就在里面！咱们冲进去，让他出来给个说法！"
    c "（拉着 l 的胳膊）别冲动！军警手里有棍子，万一打起来，咱们会有人受伤的！"
    j "（举着相机后退）同学，你们别硬来，我还在报道呢，要是冲突了，报纸可能会说你们闹事。"

    menu:
        "冲击赵家楼（风险极高）":
            s "（攥紧拳头）都这时候了还怕冲突？曹汝霖签了卖国条约，咱们今天就得让他知道，国人不答应！"
            $ action_at_zjl = "attack"
            $ risk += 3
            $ reputation -= 1
            $ media_attention += 2
            $ passion += 1
            # 过激倾向使未来被捕几率上升（在后续结算里通过 risk 与分支体现）
            l "（大喊）跟我冲！"
            crowd "冲啊！"
            军警 "（举棍阻拦）别过来！再过来我们就动手了！"
            #混乱场景：用人物反应体现后果
            c "（扶着受伤的同学）小心！有人被棍子打到了！"
            j "（快速拍照）完了，这下报纸该怎么写……"
            s "（被推搡着后退）大家别散！就算冲不进去，也要在这喊到曹汝霖出来！"
            jump aftermath_capitol

        "维持秩序继续游行（较稳妥）":
            s "领队，别冲！咱们的目的是让更多人知道诉求，不是跟军警打架。大家排好队，继续喊口号，让周围的市民都听见！"
            $ action_at_zjl = "parade"
            $ risk += 1
            $ reputation += 1
            $ media_attention += 1
            $ insight += 1
            $ fame += 1
            l "（点头）听你的！大家都站好，别跟军警起冲突！"
            s "（站上台阶）路过的乡亲们，青岛是咱们中国的土地，日本要抢，政府还想同意！你们说，咱们能答应吗？"
            passersby "不能！"
            j "（走上前）同学，能跟我详细说说你们的诉求吗？我想写篇专访，让全国都看到。"
            jump continue_parade

label continue_parade:
    j "同学，你们这次游行，最想让政府做什么？"
    s "第一，拒签《巴黎和约》，不能把青岛给日本；第二，惩办曹汝霖、章宗祥这些卖国贼；第三，释放之前被捕的学生！"
    j "（快速记录）好的，这些我都会写进报道里。对了，你们接下来还会有其他行动吗？"
    s "会！要是政府不回应，我们会联合其他学校，一起罢课，直到他们答应为止！"
    $ media_attention += 2
    $ reputation += 1
    $ fame += 1
    m "（跑过来）同学，我们商会决定了，明天开始罢市，支持你们的行动！"
    g "我们工厂也会罢工！学生罢课、工人罢工、商人罢市，看政府还敢不回应！"
    s "（激动）谢谢大家！有你们支持，我们一定能成功！"
    jump movement_spread

label aftermath_capitol:
    c "（喘着气）军警还在后面追，咱们得找个地方躲躲。"
    p "（捂着伤口）我刚才被警棍打到了，走不动了…… 你们别管我，快走吧！"
    s "不行！要走一起走！咱们找个老百姓家躲躲，军警不敢随便进民居。"
    if risk >= 4:
        d "（突然出现）别跑了！你们这些闹事的学生，跟我回警局！"
        l "（挡在前面）要抓就抓我，别抓其他同学！"
        d "（冷笑）一个都跑不了！"
        n "几名军警围了上来，多名同学被捕。"
        $ reputation -= 1
        $ fame -= 1
        $ jailed = True
        p "（被押着走）你们一定要继续坚持！别因为我们被捕就放弃！"
        "放心！我们不会放弃的！"
    else:
        t "（从胡同里探出头）快进来！我这茶馆有后门，能送你们出去！"
        s "（扶着p跑进去）谢谢老板！"
        t "（关上门）别出声，军警刚从我门口过，没发现你们。"
        $ fame += 0
    j "（从窗外探进头）同学，我刚才看到你们被捕了几个…… 我会写报道，让社会关注这件事，逼政府放人。"
    s "麻烦您了！一定要让大家知道，我们不是闹事，是为了国家！"
    $ media_attention += 1
    jump movement_spread

label hesitate:
    #scene 宿舍，窗外传来游行口号声
    s "（站在窗前，看着远处的游行队伍）我不是不想参加，只是…… 游行能改变什么呢？万一被抓了，反而帮不上忙。"
    c "（推门进来，脸上带着伤）你看！我们跟军警冲突了，有十几个同学被抓了！"
    s "（皱眉）怎么会这样？我就说不能硬来…… 对了，你们有没有跟媒体联系？让媒体报道这件事，逼政府放人。"
    c "（愣住）媒体？我们没想着联系媒体……"
    s "（拿出纸笔）我现在写封信，你帮我交给《晨报》的记者，让他们报道被捕同学的情况。只有让社会关注，政府才会怕。"
    $insight += 1
    $ fame -= 1
    jump movement_spread

label refuse:
    #scene 教室，其他同学都去游行了，只有你在看书
    s "（翻着书，却看不进去）爹娘说，读书才是正道，政治太危险…… 可刚才听到游行的口号，我心里怎么这么难受？"
    c "（跑进来，手里拿着报纸）你快看！咱们学校的游行队伍，已经联合工人和商人了！政府开始慌了，说要考虑拒签和约！"
    s "（放下书，沉默片刻）真的吗？那…… 之前被捕的同学呢？"
    c "还没放出来，但媒体都在报道，社会上很多人都在呼吁放人。对了，你要是想帮忙，现在还来得及，我们还需要人写传单。"
    s "（犹豫）我…… 我还是算了吧。我怕给爹娘惹麻烦。"
    $insight += 0
    $ passion -= 1
    $ reputation -= 1
    jump movement_spread

label movement_spread:
    g "（拿着电报走进来）好消息！上海、天津的工人都罢工了，南京、武汉的学生也开始罢课了！全国都在支持咱们！"
    m "我们商会也收到消息，广州、重庆的商户都罢市了！现在全国上下一条心，政府再不回应，就撑不住了！"
    # 响应度受社会支持与媒体关注、个人声望调制
    s "太好了！咱们之前的努力没白费，走前门时发动了工人和商户，媒体又报道了咱们的诉求，现在全国都知道了！"
    $ city_support += reputation + media_attention + (fame // 2)
    # 若前面选择“迂回”并持续文宣，传播效率额外加成
    if route_taken == "detour":
        m "要不是当初绕路走，咱们也发动不了这么多商户和工人。这一步走对了！"
        $ city_support += 1
    # 若曾被捕，引发同情与关注的同时也压缩组织机动性
    if jailed:
        j "（拿着报纸进来）你们看！报纸都在报道被捕同学的事，社会上很多人都在抗议，要求政府放人。政府已经松口了，说会考虑释放被捕学生！"
        $ media_attention += 1
        $ reputation -= 1
    l "现在全国都动起来了，咱们得商量下下一步该怎么做？是继续街头演讲，还是办份报纸，把咱们的思想传得更远？"
    jump strategy_choice

label strategy_choice:
    l "现在有两个办法：一是去街头演讲，直接跟市民说咱们的诉求，能快速发动更多人；二是办份小报，把咱们的思想写下来，能影响更多地方的人。你们觉得选哪个？"
    c "街头演讲好！能直接跟老百姓互动，他们有疑问咱们也能当场解答。"
    j "办报纸好！我认识印刷厂的人，能帮你们排版印刷。报纸能送到外地，让上海、广州的人也看到咱们的想法。"

    menu:
        "街头演讲":
            s "我选街头演讲！现在还有很多老百姓不知道青岛问题的真相，咱们当面跟他们说，能让他们更快明白咱们的诉求。而且工人大哥和商户老板也能帮着扩散，效果更快！"
            $ strategy_work = "街头演讲"
            jump speech

        "办报写文章":
            s "我选办报写文章！演讲只能影响北京的人，报纸能送到全国。咱们把青岛问题的来龙去脉写清楚，再说说 “德先生” 和 “赛先生”，能让更多人明白，咱们不是在闹事，是在找强国的办法！"
            $ strategy_work = "办报写文章"
            jump article

label speech:
    #scene 天桥广场，周围围满了市民、工人和商户
    s "（站在高台上）乡亲们，大家知道吗？咱们中国打赢了一战，本来该收回青岛，可现在列强要把青岛给日本！咱们的政府，竟然还想签这个卖国条约！"
    crowd "（愤怒）不能签！青岛是咱们的！"
    s "对！不能签！所以我们学生上街游行，工人兄弟罢工，商户老板罢市，就是要逼政府拒签和约、惩治国贼！"

    # 将演讲效果与个人属性绑定
    $ fame += 1 + (1 if passion >= 2 else 0)
    $ reputation += 1
    $ media_attention += 1

    g "（站出来）大家别光愤怒！咱们一起喊口号，让政府听到咱们的声音 —— 还我青岛，拒签和约！"
    crowd "还我青岛，拒签和约！"
    d "（在人群外张望，小声打电话）喂，天桥这边有学生演讲，人很多，要不要派军警过来？"
    c "（拉着你的衣角）你看那个人，鬼鬼祟祟的，好像是密探！"
    menu:
        "勇敢继续，吸引注意让同伴撤退":
            s "（故意提高声音，对着话筒喊）乡亲们！就算有人盯着咱们，就算军警要来抓咱们，咱们也不能退！今天我站在这儿，就没想着走 —— 但请大家记住，就算我不在了，还有你们，还有全国的中国人！"
            crowd "（更激动地喊）不退！不退！"
            d "（被人群的喊声惊到，手里的本子掉在地上，慌忙捡起来往后退）"
            c "（拉着 g 小声说）快走！咱们从后门绕去茶馆，别让军警堵到！"
            # 高热情与高声望可减轻负面后果
            if passion + fame >= 4:
                g "（边走边回头喊）同学，我们在茶馆等你！你小心！"
                s "（对着人群鞠躬）谢谢大家！今天就到这儿，明天咱们东交民巷见！"
                d "（看着你走下台，想上前又被市民围着，只能跺脚）"
                s "（趁乱拐进胡同，对着远处的 d 挥了挥手）"
                n "你的号召力震慑了密探，同伴们顺着后门顺利撤离，你也借着市民的掩护脱身。"
                $ risk += 1
                $ reputation += 1
            else:
                军警 "（突然从巷口冲出来，举着木棍喊）不许动！都跟我们回警局！"
                g "（想冲回来救你，被军警拦住）"
                s "别管我！你们继续去天津！"
                d "（指着你对军警说）就是他带头演讲，抓他准没错！"
                n "你为了吸引军警注意，让同伴们趁机跑远，自己却被戴上了手铐，押进了警车。"
                $ jailed = True
                $ risk += 2
                $ reputation -= 1
            jump resolution

        "机智地转换话题，混入人群":
            s "刚才跟大家说的都是大事，咱们也说点实在的 —— 商会的老板说了，今天来支持咱们的乡亲，去前门商铺买东西，都能打八折！老板，您说是不是？"
            m "（连忙站起来喊）是！只要支持学生，咱们商铺就让利！"
            crowd "真的？那我去买两斤糖！"
            s "（趁人群骚动，弯腰对 c 说）你带着大家从左边胡同走，我跟记者一起走，引开密探。"
            c "（点头）你小心！"
            d "（看着人群散了，急得往前挤，却被买东西的市民挡着）哎，让让！我找刚才演讲的学生！"
            j "（拉着你往报社方向走，故意大声说）同学，咱们去报社详谈，我给你做个专访！"
            s "不好意思，我要去报社，咱下次再聊啊！"
            d "（看着你们走远，只能骂了一句，转身走了）"
            n "你借着转换话题分散了人群注意力，又跟着记者顺利脱身，密探到最后都没找到机会靠近。"
            $ insight += 1
            $ risk += 0
            jump resolution

label article:
    #scene 印刷厂后院小屋，桌上堆着纸和墨水，墙上贴着 “还我青岛” 的标语
    t "（把一杯热茶推到你面前）同学，你尽管写！我这连夜给你印，明天一早就能送到前门、天桥的商铺，让他们帮着发 —— 我儿子也在游行队伍里，你们做的事，我得支持！"
    s " 谢谢您。我不想只写口号，我想让大家知道，青岛为什么重要，咱们为什么要拒签条约 —— 不能让大家光跟着喊，得让大家明白背后的道理。"
    j " 我给你找了青岛的历史资料，还有列强分赃的会议记录，你写的时候能用上。对了，别忘了提 “德先生” 和 “赛先生”，这才是咱们强国的根本！"
    s "（点头，笔尖在纸上快速滑动）我会的 —— 先写青岛的地理位置，再写劳工的牺牲，最后说思想启蒙，这样大家能看明白，也能记在心里。"
    # 文章影响由觉悟和声望加成
    $ media_attention += 1 + (1 if insight >= 2 else 0)
    $ reputation += 1
    $ fame += 1

    t "（拿着印好的小样走过来）同学，你看看，这字清楚不？我印了五百份，要是不够，我再印！"
    s "（接过小样，看着自己的文字变成铅字，眼眶发热）太清楚了！谢谢您，老板。"
    g "（推门进来，手里拿着一叠钱）同学，这是我们工人凑的钱，给你当印报纸的费用 —— 我们虽然没文化，但你写的文章，我们能看懂，也能拿着去给工友们念！"
    s " 大哥，不用！印刷厂老板已经免费帮我们印了。不过我有个想法，接下来的文章，我想问问大家的意见 —— 是写得激进点，号召大家立刻行动；还是写得深刻点，帮大家理清思想？"
    j " 激进的文章能快速调动情绪，但容易被政府查禁；深刻的评论能慢慢改变思想，影响更长远 —— 就看你想侧重哪方面了。"
    t " 我觉得深刻点好，我邻居家的老爷子，就喜欢看讲道理的文章，看完还会跟街坊们聊，比光喊口号管用。"
    menu:
        "写煽动性强的檄文，号召立即行动":
            s "（握紧笔）我选写檄文！现在政府还在犹豫，咱们得再推一把！让大家明天就去东交民巷请愿，让政府知道，全国人都在盯着他们！"
            $ wrote_radical = True
            $ passion += 1
            $ media_attention += 1
            $ risk += 1
            t "（点头）行！我给你用大号字体印标题，让大家一眼就能看见！"
            s "（笔尖在纸上疾走，标题写得又大又粗：《明日东交民巷见！不拒条约，誓不罢休！》）"
            g "（凑过来看，激动地说）好！我明天带一百个兄弟去，拿着报纸跟大家说，保证能凑够人！"
            j "（皱眉）我得提醒你，檄文印出来可能会被查禁，你得让商铺小心点发。"
            s "（点头）我知道，但现在不是怕的时候 —— 只要能让政府拒签条约，这点风险不算什么！"
            n "你连夜写完檄文，印刷厂老板加急印刷，第二天一早就传遍了北京的街头巷尾，不少人拿着檄文就往东交民巷赶。"
            # 檄文能拉动支持，但也更易被打压
            $ reputation += 0
            jump resolution

        "写说理深刻的评论，进行思想启蒙":
            s "（放下笔，看着资料说）我选写评论。光让大家行动不够，得让大家明白，为什么要行动，以后该怎么行动 —— 不然这次运动过了，下次列强再来，大家还是会迷茫。"
            $ wrote_commentary = True
            $ insight += 1
            $ media_attention += 1
            $ reputation += 1
            j "（笑着说）我就知道你会选这个！我给你加个编者按，再配上青岛的地图，这样大家看得更明白。"
            s "（笔尖在纸上慢慢写，标题写得沉稳：《青岛之重，不在地而在民；拒约之要，不在喊而在思》）"
            t "（看了标题，点头说）这标题好，能让人静下心来读。我把这篇评论印在小报的头版，再附上前几天的文章，让大家能连贯着看。"
            m "（推门进来，手里拿着一叠小报）同学，我跟沿街商铺说了，每个商铺都留十份，让店员给顾客讲解 —— 不少商户看完评论，都说明天要挂 “支持思想启蒙” 的布条！"
            s "（笑着说）太好了！这样大家不仅能看，还能听讲解，慢慢就会明白，思想才是咱们最强的力量。"
            n "你写完的评论配上地图和编者按，成了街头最受欢迎的小报，不少市民看完后，还会主动跟街坊讲解，思想启蒙的效果慢慢显现出来。"
            jump resolution

label resolution:
    #scene 北京街头，到处是欢呼的人群，有人举着 “拒签成功” 的标语，有人撒传单
    p "（从警局跑出来，手里拿着释放证明，对着人群喊）我们出来了！政府释放了所有被捕的学生！"
    crowd "（欢呼）好！太好了！"
    m "（拿着电报跑过来，声音发抖）还有更好的消息！曹汝霖、章宗祥、陆宗舆被免职了！北洋政府下了命令，把这三个卖国贼撤了！"
    g "（扛着铁锤跳上台阶，大声喊）最棒的是这个！巴黎那边传来消息，咱们中国代表，拒绝在《巴黎和约》上签字！青岛保住了！"
    crowd " 保住了！终于保住了！"
    s "（看着欢呼的人群，眼眶发热，身边的 c 拍了拍你的肩膀）"
    c " 你看，咱们做到了！你的演讲（或文章）没白做，大家都跟着行动起来了！"
    j "（举着相机跑过来，对着你和人群拍照）快笑一个！这是历史性的一刻，得记下来！"
    if strategy_work:
        l "（拿着一份小报走过来，指着上面的名字）你看，小报上写着你的名字呢！大家都知道，这次运动里，你主要参与了 [strategy_work] 工作 —— 没有你，咱们的力量不会这么大！"
        s " 不是我一个人的功劳，是大家一起的 —— 学生、工人、商户、记者，还有所有支持咱们的市民，少了谁都不行。"

    n "运动渐渐平息，街头的欢呼声慢慢淡了，但每个人脸上的笑容还在。你站在街头，看着来往的人群，突然明白，这场运动改变的不只是青岛的命运，还有你自己的人生 —— 你知道，未来还有更长的路要走。"

    # ======= 画像判定：阈值与新结局 =======
    $ mass_power = reputation + city_support + media_attention

    # 悲剧英雄：阈值更高，强调“热情过盛 + 高风险/鲁莽迹象”
    $ is_tragic = (passion >= 6) and (action_at_zjl == "attack" or jailed or risk >= 5)

    # 革命之路：提高热情阈值，允许“写过檄文且风险承受高”作为次通道
    $ is_revolution = ((passion >= 5 and insight >= 4) or (wrote_radical and passion >= 4 and risk >= 3))

    # 文人斗士：提高声望与觉悟的双高门槛，并偏向写评论者
    $ is_literati = (fame >= 5 and insight >= 5 and (wrote_commentary or strategy_work == "办报写文章"))

    # 社会组织者（群众领袖/社会改革者）：
    # 强组织力与号召力，群体动员分高，风险不至于失控
    $ is_organizer = ((fame >= 5 or reputation >= 2) and mass_power >= 8 and risk <= 4)

    # 教育先行者（学术/留学/从教）：
    # 高觉悟、低风险取向，偏重理性建设；写评论或走“办报写文章”路径更容易触发
    $ is_academic = (insight >= 5 and risk <= 2 and (wrote_commentary or strategy_work == "办报写文章"))

    # ======= 结局分支 =======
    if is_tragic:
        "【悲剧英雄】"
        "你的爱国热情炽烈如火，也因此多次挺身在前。一次行动中，你身受重伤。"
        "同学们以你的名字传颂这段历史，人们在惋惜中记住了那份无畏。"
        return

    elif is_revolution and not (is_literati or is_organizer or is_academic):
        "【革命之路】"
        "你对国家与人民的热爱与日俱增，思想也在斗争中日益成熟。"
        "你南下，或远赴法国勤工俭学，最终走上革命道路，成为坚定的共产党人。"
        return

    elif is_literati and not (is_revolution or is_organizer or is_academic):
        "【文人斗士】"
        "你把笔当作刀枪，以文字为阵地。"
        "你成为杰出的作家、记者或学者，在文化战线持续启蒙民众，推动社会变革。"
        return

    elif is_organizer and not (is_revolution or is_literati or is_academic):
        "【社会组织者】"
        "你擅长协调各界力量，号召学生、工人、商人形成合力。"
        "此后你投身工会、社团或公益事业，推进社会改革，成为群众信赖的组织者。"
        return

    elif is_academic and not (is_revolution or is_literati or is_organizer):
        "【教育先行者】"
        "你选择在学术与教育中探寻强国之道，或远赴海外研习，或回国从教办学。"
        "你用知识塑造新一代青年，让启蒙之火持续燃烧。"
        return

    # 同时满足多种画像时的倾向选择
    elif is_revolution or is_literati or is_organizer or is_academic:
        # 三维谁更突出，偏向相应人物画像
        if passion >= max(fame, insight) and is_revolution:
            "【革命之路】"
            "你既有思想也敢担当，最终投身革命洪流，成为坚定的共产党人。"
            return
        elif fame >= max(passion, insight):
            if is_organizer:
                "【社会组织者】"
                "你以出众的动员与协调能力，持续推动社会改革。"
                return
            else:
                "【文人斗士】"
                "你以广泛的社会影响力与深刻的思想，在文化战线持续战斗。"
                return
        else:
            if is_academic:
                "【教育先行者】"
                "你将理性与知识化为力量，投身教育与学术建设。"
                return
            else:
                "【文人斗士】"
                "你在思想与文化战线继续前行。"
                return

    else:
        "【未定之途】"
        "风浪过后，余波仍在。也许你会继续求学，也许你会在下一次风起时做出新的抉择。"
        "五四的火种，已在你心中点亮。"
        return
